/**
 * TrackPay Marketing Site - Bilingual Support (EN/ES)
 * Simple client-side i18n without dependencies
 */

const translations = {
  en: {
    // Meta
    'meta.title': 'TrackPay - Time Tracked. Payments Sorted.',
    'meta.description': 'TrackPay helps independent pros and small teams log work hours and get paid faster â€” all from one simple, bilingual app.',

    // Hero
    'hero.title': 'Time Tracked. Payments Sorted.',
    'hero.subtitle': 'TrackPay helps independent pros and small teams log work hours and get paid faster â€” all from one simple, bilingual app.',
    'hero.feature1': 'â±ï¸ Track sessions',
    'hero.feature2': 'ðŸ’µ Request payments',
    'hero.feature3': 'ðŸ¤ Stay transparent',
    'hero.emailPlaceholder': 'Your email',
    'hero.cta': 'Join the Waitlist',
    'hero.ctaNote': 'Be first to try TrackPay on iPhone.',

    // Problem Section
    'problem.title': 'Why getting paid on time still feels harder than it should',
    'problem.pain1.title': 'Lost hours',
    'problem.pain1.description': 'Manual logs or texts lead to forgotten billable time.',
    'problem.pain2.title': 'Awkward follow-ups',
    'problem.pain2.description': '"Hey, just checkingâ€¦" shouldn\'t be your default message.',
    'problem.pain3.title': 'Payment delays',
    'problem.pain3.description': 'Clients forget, or don\'t have visibility into what\'s due.',
    'problem.pain4.title': 'No shared record',
    'problem.pain4.description': 'Providers and clients rarely see the same truth.',

    // Solution Section
    'solution.title': 'The simple way to track work and payments',
    'solution.step1.title': 'Start a session.',
    'solution.step1.description': 'Tap Start when you begin work â€” TrackPay logs hours automatically.',
    'solution.step2.title': 'Stop and request payment.',
    'solution.step2.description': 'When you\'re done, tap Stop â†’ Request Payment in one step.',
    'solution.step3.title': 'Clients get notified instantly.',
    'solution.step3.description': 'They see hours, rate, and total â€” and can mark it paid right away.',
    'solution.tagline': 'ðŸ’¬ No spreadsheets. No awkward texts. Just clarity for both sides.',

    // Features Section
    'features.title': 'Built for both sides of the job',
    'features.providers.title': 'ðŸ‘·â€â™‚ï¸ For Service Providers',
    'features.providers.feature1': 'Track sessions in real time',
    'features.providers.feature2': 'Request payments with one tap',
    'features.providers.feature3': 'See all clients, hours, and totals at a glance',
    'features.providers.feature4': 'Works in English and Spanish',
    'features.clients.title': 'ðŸ’¼ For Clients',
    'features.clients.feature1': 'Get clear visibility on hours and amounts',
    'features.clients.feature2': 'Mark payments as completed',
    'features.clients.feature3': 'No logins or spreadsheets',
    'features.clients.feature4': 'Instant updates when work is done',

    // Preview Section
    'preview.title': 'Designed for clarity. Built for trust.',

    // Trust Section
    'trust.title': 'Why independent pros love TrackPay',
    'trust.testimonial1.quote': '"Finally a clean, bilingual way to manage client hours."',
    'trust.testimonial1.author': 'â€” Paola, Freelance Designer',
    'trust.testimonial2.quote': '"It\'s like having a shared ledger that both sides actually use."',
    'trust.testimonial2.author': 'â€” Alex, Consultant',
    'trust.testimonial3.quote': '"No confusion, no chasing payments. Simple and respectful."',
    'trust.testimonial3.author': 'â€” Luis, Contractor',

    // CTA Section
    'cta.title': 'Join the waitlist. Be part of the TrackPay launch.',
    'cta.subtitle': 'Early users get exclusive beta access and feedback rewards.',
    'cta.button': 'Join Waitlist â†’',

    // Footer
    'footer.privacy': 'Privacy Policy',
    'footer.about': 'About Us',
    'footer.contact': 'Contact Us',
  },
  es: {
    // Meta
    'meta.title': 'TrackPay - Tiempo registrado. Pagos al dÃ­a.',
    'meta.description': 'TrackPay ayuda a profesionales y equipos pequeÃ±os a registrar sus horas y recibir pagos mÃ¡s rÃ¡pido â€” todo desde una app simple y bilingÃ¼e.',

    // Hero
    'hero.title': 'Tiempo registrado. Pagos al dÃ­a.',
    'hero.subtitle': 'TrackPay ayuda a profesionales y equipos pequeÃ±os a registrar sus horas y recibir pagos mÃ¡s rÃ¡pido â€” todo desde una app simple y bilingÃ¼e.',
    'hero.feature1': 'â±ï¸ Registra sesiones',
    'hero.feature2': 'ðŸ’µ Solicita pagos',
    'hero.feature3': 'ðŸ¤ MantÃ©n transparencia',
    'hero.emailPlaceholder': 'Tu correo electrÃ³nico',
    'hero.cta': 'Ãšnete a la lista de espera',
    'hero.ctaNote': 'SÃ© el primero en probar TrackPay en iPhone.',

    // Problem Section
    'problem.title': 'Por quÃ© recibir pagos a tiempo sigue siendo mÃ¡s difÃ­cil de lo que deberÃ­a',
    'problem.pain1.title': 'Horas perdidas',
    'problem.pain1.description': 'Los registros manuales o mensajes de texto llevan a olvidar horas facturables.',
    'problem.pain2.title': 'Seguimientos incÃ³modos',
    'problem.pain2.description': '"Hola, solo verificandoâ€¦" no deberÃ­a ser tu mensaje predeterminado.',
    'problem.pain3.title': 'Retrasos en pagos',
    'problem.pain3.description': 'Los clientes olvidan, o no tienen visibilidad de lo que deben.',
    'problem.pain4.title': 'Sin registro compartido',
    'problem.pain4.description': 'Proveedores y clientes rara vez ven la misma verdad.',

    // Solution Section
    'solution.title': 'La forma simple de rastrear trabajo y pagos',
    'solution.step1.title': 'Inicia una sesiÃ³n.',
    'solution.step1.description': 'Toca Iniciar cuando comiences a trabajar â€” TrackPay registra las horas automÃ¡ticamente.',
    'solution.step2.title': 'DetÃ©n y solicita el pago.',
    'solution.step2.description': 'Cuando termines, toca Detener â†’ Solicitar pago en un solo paso.',
    'solution.step3.title': 'Los clientes son notificados al instante.',
    'solution.step3.description': 'Ven horas, tarifa y total â€” y pueden marcarlo como pagado de inmediato.',
    'solution.tagline': 'ðŸ’¬ Sin hojas de cÃ¡lculo. Sin textos incÃ³modos. Solo claridad para ambos lados.',

    // Features Section
    'features.title': 'DiseÃ±ado para ambos lados del trabajo',
    'features.providers.title': 'ðŸ‘·â€â™‚ï¸ Para proveedores de servicios',
    'features.providers.feature1': 'Rastrea sesiones en tiempo real',
    'features.providers.feature2': 'Solicita pagos con un toque',
    'features.providers.feature3': 'Ve todos los clientes, horas y totales de un vistazo',
    'features.providers.feature4': 'Funciona en inglÃ©s y espaÃ±ol',
    'features.clients.title': 'ðŸ’¼ Para clientes',
    'features.clients.feature1': 'ObtÃ©n visibilidad clara de horas y montos',
    'features.clients.feature2': 'Marca pagos como completados',
    'features.clients.feature3': 'Sin inicios de sesiÃ³n ni hojas de cÃ¡lculo',
    'features.clients.feature4': 'Actualizaciones instantÃ¡neas cuando se completa el trabajo',

    // Preview Section
    'preview.title': 'DiseÃ±ado para claridad. Construido para confianza.',

    // Trust Section
    'trust.title': 'Por quÃ© los profesionales independientes aman TrackPay',
    'trust.testimonial1.quote': '"Finalmente una forma limpia y bilingÃ¼e de gestionar horas de clientes."',
    'trust.testimonial1.author': 'â€” Paola, DiseÃ±adora Freelance',
    'trust.testimonial2.quote': '"Es como tener un libro mayor compartido que ambos lados realmente usan."',
    'trust.testimonial2.author': 'â€” Alex, Consultor',
    'trust.testimonial3.quote': '"Sin confusiÃ³n, sin perseguir pagos. Simple y respetuoso."',
    'trust.testimonial3.author': 'â€” Luis, Contratista',

    // CTA Section
    'cta.title': 'Ãšnete a la lista de espera. SÃ© parte del lanzamiento de TrackPay.',
    'cta.subtitle': 'Los primeros usuarios obtienen acceso beta exclusivo y recompensas por comentarios.',
    'cta.button': 'Ãšnete a la lista â†’',

    // Footer
    'footer.privacy': 'PolÃ­tica de Privacidad',
    'footer.about': 'Sobre Nosotros',
    'footer.contact': 'ContÃ¡ctanos',
  }
};

// Current language state
let currentLang = 'en';

/**
 * Initialize i18n on page load
 */
function initI18n() {
  // Check localStorage for saved preference
  const savedLang = localStorage.getItem('trackpay-lang');
  if (savedLang && (savedLang === 'en' || savedLang === 'es')) {
    currentLang = savedLang;
  } else {
    // Detect browser language
    const browserLang = navigator.language || navigator.userLanguage;
    if (browserLang.startsWith('es')) {
      currentLang = 'es';
    }
  }

  // Apply translations
  applyTranslations(currentLang);

  // Set up event listeners
  setupLanguageToggle();
}

/**
 * Apply translations to all elements with data-i18n attribute
 */
function applyTranslations(lang) {
  currentLang = lang;
  localStorage.setItem('trackpay-lang', lang);

  // Update HTML lang attribute
  document.documentElement.lang = lang;

  // Translate all elements with data-i18n
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    if (translations[lang] && translations[lang][key]) {
      element.textContent = translations[lang][key];
    }
  });

  // Handle placeholder translations
  document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
    const key = element.getAttribute('data-i18n-placeholder');
    if (translations[lang] && translations[lang][key]) {
      element.placeholder = translations[lang][key];
    }
  });

  // Update language toggle active state
  updateLanguageToggle(lang);
}

/**
 * Update active state on language toggle buttons
 */
function updateLanguageToggle(lang) {
  document.querySelectorAll('.lang-option').forEach(option => {
    const optionLang = option.getAttribute('data-lang');
    if (optionLang === lang) {
      option.classList.add('active');
    } else {
      option.classList.remove('active');
    }
  });
}

/**
 * Set up event listeners for language toggle
 */
function setupLanguageToggle() {
  // Header toggle
  const headerToggle = document.getElementById('lang-toggle');
  if (headerToggle) {
    headerToggle.addEventListener('click', toggleLanguage);
  }

  // Footer toggle
  const footerToggle = document.getElementById('lang-toggle-footer');
  if (footerToggle) {
    footerToggle.addEventListener('click', toggleLanguage);
  }

  // Individual language options (for direct click)
  document.querySelectorAll('.lang-option').forEach(option => {
    option.addEventListener('click', (e) => {
      e.stopPropagation();
      const targetLang = option.getAttribute('data-lang');
      if (targetLang && targetLang !== currentLang) {
        applyTranslations(targetLang);
      }
    });
  });
}

/**
 * Toggle between EN and ES
 */
function toggleLanguage() {
  const newLang = currentLang === 'en' ? 'es' : 'en';
  applyTranslations(newLang);
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initI18n);
} else {
  initI18n();
}
